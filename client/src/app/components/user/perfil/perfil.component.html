<div class="user-container container-mw" *ngIf="!error && user.id;else notFound">
    <div class="uc-presentacion">
        <img class="u-fperfil" [src]="api_url + user.foto_perfil" alt="">
        <div class="u-name">
            <p>
                {{user.nombre}}
                <span class="fas" [ngClass]="{'fa-mars': user.sexo == 0, 'fa-venus': user.sexo == 1, 'fa-genderless': user.sexo == 2}"></span>
            </p>
            <ng-container *ngIf="!owner;else isOwner">
                <a class="fav" *ngIf="!favorito;else isFav" (click)="addToFav(user.id)"><span class="fas fa-heart"></span> Favoritos</a>
                <ng-template #isFav><button class="bg-red" (click)="delFav(user.id)"><span class="fas fa-minus-square"></span> Quitar de favoritos</button></ng-template>
            </ng-container>
            <ng-template #isOwner><a class="fav" (click)="editPerfil()"><span class="fas fa-edit"></span> Editar</a></ng-template>
        </div>
    </div>

    <div>
        <h2>Hobbies</h2>
        <div class="uc-hobbies">
            <p *ngIf="user.hobbies && user.hobbies.length == 0">No hay hobbies disponibles.</p>
            
            <p *ngFor="let hobbie of user.hobbies">
                {{hobbie.hobbie}}
            </p>
        </div>
    </div>

    <div class="desc-gustos">
        <div class="uc-desc">
            <h2>Descripcion</h2>
            <p>{{user.descripcion}}</p>
        </div>
        <div class="uc-gustos">
            <h2>Gustos</h2>
            <div class="uc-row">
                <span class="fas fa-beer"></span>
                <p>{{user.bebedor == 0 ? 'No bebe' : 'Consume alcohol'}}</p>
            </div>
            <div class="uc-row">
                <span class="fas fa-smoking"></span>
                <p>{{user.fumador == 0 ? 'No fuma' : 'Fumador'}}</p>
            </div>
            <div class="uc-row">
                <span class="fas fa-glass-cheers"></span>
                <p>{{user.fiestas == 0 ? 'No hace fiestas' : 'Hace fiestas'}}</p>
            </div>
            <div class="uc-row">
                <span class="fas fa-paw"></span>
                <p>{{user.mascotas == 0 ? 'No tiene mascotas' : 'Tiene mascota(s)'}}</p>
            </div>
            <div class="uc-row">
                <span class="fas fa-baby"></span>
                <p>{{user.hijos == 0 ? 'No tiene hijos' : 'Tiene hijo(s)'}}</p>
            </div>
        </div>
    </div>
    
    <div class="fotos-container">
        <h2>Fotos</h2>
        <p *ngIf="user.fotos && user.fotos.length == 0">No hay fotos disponibles.</p>
        <div class="fotos">
            <img *ngFor="let foto of user.fotos" [src]="api_url + foto.link" alt="" (click)="zoomIn(foto)">
        </div>
        <div class="fotos-add" *ngIf="owner">
            <img (click)="showImgForm()" src="assets/images/add-image.png" alt="">
        </div>
    </div>

    <div class="foto-zoom" *ngIf="showImg == true">
        <div class="foto-courtain" (click)="zoomOut()"></div>
        <span (click)="zoomOut()" class="cerrar fas fa-times"></span>
        <img [src]="api_url + img.link" alt="">
        <p>{{img.descripcion}}</p>
    </div>
</div>

<div class="modal-newimg d-flex" *ngIf="showform">
    <span (click)="closeImgForm()" class="cerrar fas fa-times"></span>
    <h1>Subir una foto</h1>
    
    <div class="preview">
        <p>Preview</p>
        <img [src]="preview ? preview : 'assets/images/users/default.jpg'" alt="">
    </div>
    
    <form (ngSubmit)="uploadImg(newImg)" #newImg="ngForm">
        <div class="d-flex form-group">
            <label for="descripcion">Descripcion</label>
            <input type="text" #descripcion="ngModel" ngModel name="descripcion">
        </div>
        <input accept="image/*" type="file" #newfoto="ngModel" ngModel name="newimage" (change)="loadImg($event)" required>
        <button type="submit" [disabled]="newImg.invalid">Subir</button>
    </form>
</div>

<ng-template #notFound>
    <h1>
       {{error}}
    </h1>
</ng-template>